<div class="tab-content" [class.active]="activeTab === 'parked' && !isLoading">
      <div class="form-card">
        <div class="form-card-header">
          <div class="form-card-title">Vehículos Estacionados</div>
          <div class="form-card-description">Lista de vehículos actualmente en el parqueadero</div>
        </div>
        <div class="form-card-content">

          <!-- ========== SECCIÓN DE REIMPRESIÓN ========== -->
          <div class="reprint-section" style="margin-bottom: 1.5rem;">
            <div class="form-group" style="margin: 0;">
              <label class="form-label" for="searchPlateReprint">Reimprimir Ticket</label>
              <div style="display: flex; gap: 0.5rem;">
                <input 
                  class="form-input" 
                  type="text" 
                  id="searchPlateReprint"
                  placeholder="Ingrese placa..."
                  [(ngModel)]="searchPlateForReprint"
                  (keyup.enter)="reprintTicket()"
                  maxlength="10"
                  style="flex: 1; text-transform: uppercase;">
                <button 
                  class="action-button reprint" 
                  (click)="reprintTicket()"
                  style="white-space: nowrap;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 6 2 18 2 18 9"></polyline>
                    <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
                    <rect x="6" y="14" width="12" height="8"></rect>
                  </svg>
                  Reimprimir
                </button>
              </div>
            </div>
          </div>

          <!-- Tabla SOLO cuando hay datos -->
          <div *ngIf="filteredParkedVehicles.length > 0" class="table-container">
            <table id="parkedTable">
              <thead>
                <tr>
                  <th>Placa</th>
                  <th>Tipo</th>
                  <th>Hora de Entrada</th>
                  <th>Tiempo Estacionado</th>
                  <th>Costo Actual</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="parkedTableBody">
                <tr *ngFor="let vehicle of filteredParkedVehicles">
                  <td>{{ vehicle.plateNumber }}</td>
                  <td>
                    <span class="badge" [class.badge-car]="vehicle.vehicleType === 'CAR'" 
                          [class.badge-motorcycle]="vehicle.vehicleType === 'MOTORCYCLE'"
                          [class.badge-truck]="vehicle.vehicleType === 'TRUCK'">
                      {{ getVehicleTypeLabel(vehicle.vehicleType) }}
                    </span>
                  </td>
                  <td>{{ formatDateTime(vehicle.entryTime) }}</td>
                  <td>{{ calculateParkedTime(vehicle.entryTime) }}</td>
                  <td>${{ calculateCurrentCost(vehicle.entryTime, vehicle.vehicleType) | number:'1.2-2' }}</td>
                  <td class="actions-cell">
                    <button class="action-button exit" 
                            (click)="exitVehicle(vehicle)"
                            [disabled]="isProcessingExit === vehicle.plateNumber">
                      {{ isProcessingExit === vehicle.plateNumber ? 'Procesando...' : 'Registrar Salida' }}
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Estado vacío - EXACTO como tu diseño -->
          <div *ngIf="parkedVehicles.length === 0" class="empty-state" id="emptyParked">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"></path>
              <circle cx="7" cy="17" r="2"></circle>
              <path d="M9 17h6"></path>
              <circle cx="17" cy="17" r="2"></circle>
            </svg>
            <p>No hay vehículos estacionados actualmente.</p>
          </div>

          <!-- Estado de búsqueda sin resultados -->
          <div *ngIf="parkedVehicles.length > 0 && filteredParkedVehicles.length === 0" class="empty-state">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <p>No se encontraron vehículos con la placa "{{ searchPlate }}".</p>
          </div>
        </div>
      </div>

      <!-- Modal de Ticket de Salida -->
        <app-parking-ticket
            *ngIf="showTicketModal && currentTicketData"
            [ticketData]="currentTicketData"
            (onClose)="closeTicketModal()"
            (onPrint)="handleTicketPrint()">
        </app-parking-ticket>
    </div>

    
