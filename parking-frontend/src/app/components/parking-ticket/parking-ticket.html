<div class="modal-backdrop" *ngIf="ticketData">
  <div class="ticket-modal">
    <!-- Header - No se imprime -->
    <div class="ticket-header print-hidden">
      <h2>Ticket de Salida</h2>
      <button class="close-btn" (click)="handleClose()">✕</button>
    </div>

    <!-- Contenido del ticket - Se imprime -->
    <div class="ticket-content">
      <!-- Logo y título -->
      <div class="ticket-title">
        <div class="ticket-logo">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"></path>
            <circle cx="7" cy="17" r="2"></circle>
            <path d="M9 17h6"></path>
            <circle cx="17" cy="17" r="2"></circle>
          </svg>
        </div>
        <h1>PARQUEADERO</h1>
        <p>Sistema de Gestión</p>
      </div>

      <!-- ID del Ticket -->
      <div class="ticket-id">
        <span>#{{ ticketData.ticketId }}</span>
      </div>

      <!-- Información del vehículo -->
      <div class="ticket-info">
        <div class="info-row">
          <span class="label">Placa</span>
          <span class="value plate">{{ ticketData.plateNumber }}</span>
        </div>

        <div class="info-row">
          <span class="label">Tipo de Vehículo</span>
          <span class="value">{{ getVehicleTypeLabel(ticketData.vehicleType) }}</span>
        </div>

        <div class="info-row">
          <span class="label">Entrada</span>
          <span class="value time">{{ formatDateTime(ticketData.entryTime) }}</span>
        </div>

        <div class="info-row">
          <span class="label">Salida</span>
          <span class="value time">{{ formatDateTime(ticketData.exitTime) }}</span>
        </div>

        <div class="info-row">
          <span class="label">Duración</span>
          <span class="value">{{ formatDuration(ticketData.duration) }}</span>
        </div>
      </div>

      <!-- Total a pagar -->
      <div class="ticket-total">
        <span class="total-label">TOTAL A PAGAR</span>
        <span class="total-amount">${{ ticketData.amount | number:'1.2-2' }}</span>
      </div>

      <!-- Footer -->
      <div class="ticket-footer">
        <p class="footer-date">Fecha de emisión: {{ formatDateTime(ticketData.generatedAt) }}</p>
        <p class="footer-text">¡Gracias por su preferencia!</p>
        <p class="footer-text">Conserve este ticket como comprobante</p>
        <p class="footer-reprint" *ngIf="ticketData.isReprint">(Reimpresión)</p>
      </div>
    </div>

    <!-- Botones - No se imprimen -->
    <div class="ticket-actions print-hidden">
      <button class="btn-print" (click)="handlePrint()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="6 9 6 2 18 2 18 9"></polyline>
          <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
          <rect x="6" y="14" width="12" height="8"></rect>
        </svg>
        Imprimir Ticket
      </button>
      <button class="btn-close" (click)="handleClose()">Cerrar</button>
    </div>
  </div>
</div>