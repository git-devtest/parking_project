{
  "meta": {
    "project": "Parking Backend",
    "date": "2025-12-10",
    "prepared_by": "Generated by Software Development Manager"
  },
  "product_overview": "Parking Backend is a robust and scalable backend system designed for comprehensive parking management. It handles vehicle entry and exit registration, automatic fee calculation, user authentication with role-based access control, auditing, reporting, backups, and real-time insights, ensuring a secure and efficient parking service.",
  "core_goals": [
    "Provide a secure and well-documented REST API for parking management.",
    "Implement reliable user authentication and role-based authorization using JWT tokens.",
    "Ensure data integrity with complete auditing and traceability for all operations.",
    "Support automated database backup and restoration procedures.",
    "Deliver real-time statistics and analytical insights to optimize parking operations."
  ],
  "key_features": [
    "User authentication and authorization with JWT, supporting multiple roles including Admin and Operator.",
    "Comprehensive vehicle management: entry, exit registration, capacity tracking, full CRUD operations, and history tracking.",
    "Parking ticket management including automatic ticket creation, fee calculations, and ticket status management (active, paid, cancelled).",
    "User management with full CRUD capabilities and role assignment for access control.",
    "Report generation with daily and monthly detailed income and occupancy statistics.",
    "Audit trail capturing all system changes and user actions for accountability.",
    "Database backup and restoration supporting SQL and JSON formats.",
    "Real-time insights and analytics providing parking statistics and metrics.",
    "API documentation available via Swagger/OpenAPI 3.0 for ease of integration and testing."
  ],
  "user_flow_summary": [
    "User logs in via the authentication API and receives a JWT token for session management.",
    "Authorized user registers vehicle entry or exit, triggering ticket creation or fee calculation respectively.",
    "Users with proper roles manage vehicle records, users, and tickets through CRUD operations.",
    "Managers and operators generate reports on parking usage, financials, and system performance.",
    "Audit logs capture key system events and user actions for review and compliance.",
    "Regular backups are created and managed to ensure data safety and enable restoration.",
    "Users access real-time insights and statistics through dedicated endpoints to monitor operations."
  ],
  "validation_criteria": [
    "All API endpoints are fully functional as per specification and documented using Swagger/OpenAPI 3.0.",
    "Authentication and role-based authorization must enforce correct access control consistently.",
    "System audit trails record all relevant operations and changes accurately.",
    "Automated tests with Jest and TestSprite must cover at least 80% of the codebase and all main scenarios.",
    "Performance testing shows API response times within 500ms for 95% of requests under normal load.",
    "Backup and restoration features operate reliably, with successful creation, listing, and restoration of database backups.",
    "Reports generate accurate and timely data reflecting parking usage and revenues.",
    "Security best practices are applied including password encryption, rate limiting, CORS, and HTTP header protections.",
    "System uptime meets or exceeds 99.5% availability target.",
    "Comprehensive logs are maintained using Winston for debugging and monitoring purposes."
  ],
  "code_summary": {
    "tech_stack": [
      "Node.js",
      "Express.js",
      "MySQL 8.0",
      "JWT Authentication",
      "Swagger/OpenAPI 3.0"
    ],
    "features": [
      {
        "name": "Authentication API",
        "description": "User login and JWT token management for the parking system",
        "files": [
          "parking-backend/src/routes/authRoutes.js",
          "parking-backend/src/controllers/authController.js",
          "parking-backend/src/middleware/auth.js",
          "parking-backend/src/middleware/authValidation.js"
        ],
        "api_doc": {
          "endpoints": [
            {
              "method": "POST",
              "path": "/api/auth/login",
              "description": "User login with username and password",
              "requiresAuth": false
            },
            {
              "method": "POST",
              "path": "/api/auth/logout",
              "description": "User logout",
              "requiresAuth": true
            }
          ]
        }
      },
      {
        "name": "Vehicle Management API",
        "description": "Vehicle entry/exit, capacity tracking, and parking history",
        "files": [
          "parking-backend/src/routes/vehicleRoutes.js",
          "parking-backend/src/controllers/vehicleController.js",
          "parking-backend/src/services/vehicleService.js"
        ],
        "api_doc": {
          "endpoints": [
            {
              "method": "POST",
              "path": "/api/vehicles/entry",
              "description": "Register vehicle entry to parking"
            },
            {
              "method": "POST",
              "path": "/api/vehicles/exit",
              "description": "Register vehicle exit from parking and calculate fees"
            },
            {
              "method": "GET",
              "path": "/api/vehicles/parked",
              "description": "Get list of currently parked vehicles"
            },
            {
              "method": "GET",
              "path": "/api/vehicles/capacity",
              "description": "Get parking capacity status"
            },
            {
              "method": "GET",
              "path": "/api/vehicles/history",
              "description": "Get complete vehicle history"
            }
          ]
        }
      },
      {
        "name": "Reports API",
        "description": "Generate and retrieve parking reports",
        "files": [
          "parking-backend/src/routes/reportRoutes.js",
          "parking-backend/src/controllers/reportController.js",
          "parking-backend/src/services/reportService.js"
        ],
        "api_doc": {
          "endpoints": [
            {
              "method": "GET",
              "path": "/api/reports/daily",
              "description": "Get daily report"
            },
            {
              "method": "GET",
              "path": "/api/reports/monthly",
              "description": "Get monthly report"
            }
          ]
        }
      },
      {
        "name": "User Management API",
        "description": "User CRUD operations and role management",
        "files": [
          "parking-backend/src/routes/userRoutes.js",
          "parking-backend/src/controllers/userController.js",
          "parking-backend/src/services/userService.js"
        ],
        "api_doc": {
          "endpoints": [
            {
              "method": "GET",
              "path": "/api/users",
              "description": "Get all users"
            },
            {
              "method": "POST",
              "path": "/api/users",
              "description": "Create new user"
            },
            {
              "method": "PUT",
              "path": "/api/users/:id",
              "description": "Update user"
            },
            {
              "method": "DELETE",
              "path": "/api/users/:id",
              "description": "Delete user"
            }
          ]
        }
      },
      {
        "name": "Audit API",
        "description": "Track system activities and changes",
        "files": [
          "parking-backend/src/routes/auditRoutes.js",
          "parking-backend/src/controllers/auditController.js",
          "parking-backend/src/services/auditService.js"
        ],
        "api_doc": {
          "endpoints": [
            {
              "method": "GET",
              "path": "/api/audit/logs",
              "description": "Get audit logs"
            }
          ]
        }
      },
      {
        "name": "Backup API",
        "description": "Database backup and restoration",
        "files": [
          "parking-backend/src/routes/backupRoutes.js",
          "parking-backend/src/controllers/backupController.js",
          "parking-backend/src/services/backupSqlService.js"
        ],
        "api_doc": {
          "endpoints": [
            {
              "method": "POST",
              "path": "/api/backup/create",
              "description": "Create database backup"
            },
            {
              "method": "GET",
              "path": "/api/backup/list",
              "description": "List available backups"
            }
          ]
        }
      },
      {
        "name": "Insights API",
        "description": "Analytics and parking system insights",
        "files": [
          "parking-backend/src/routes/insightsRoutes.js",
          "parking-backend/src/controllers/insightsController.js"
        ],
        "api_doc": {
          "endpoints": [
            {
              "method": "GET",
              "path": "/api/insights/statistics",
              "description": "Get parking statistics"
            }
          ]
        }
      },
      {
        "name": "Tickets API",
        "description": "Parking ticket management",
        "files": [
          "parking-backend/src/routes/ticketRoutes.js",
          "parking-backend/src/controllers/ticketController.js",
          "parking-backend/src/services/ticketService.js"
        ],
        "api_doc": {
          "endpoints": [
            {
              "method": "POST",
              "path": "/api/tickets",
              "description": "Create parking ticket"
            },
            {
              "method": "GET",
              "path": "/api/tickets",
              "description": "Get tickets"
            }
          ]
        }
      }
    ]
  }
}
